# ramp - Ramping load test

A tiny AWS CloudFormation stack that performs load testing using https://gatling.io/[Gatling].

It will create (with ramp-up) a number of users who each connect to a URL and send a GET request every second. It will upload detailed test results to an AWS S3 bucket of your choice, and then - optionally - delete itself.

It can be customised for more complex use cases.

## How to use

. https://docs.aws.amazon.com/cli/latest/userguide/installing.html[Install] and https://docs.aws.amazon.com/cli/latest/userguide/cli-chap-getting-started.html[configure] the Amazon Command Line Interface. You may need to set your default region as eu-west-1.

. Edit your simulation's parameters in `params.txt`. `TargetUrl` is the url to hammer with GET requests, `PeakUsers` is the maximum number of concurrent simulated users, and `Duration` is the total duration of the test in seconds (1/3 ramp-up, 1/3 peak, 1/3 ramp-down).

. Call the `run-simulation.sh` script with any other parameters you need. The list of valid parameters is shown on `./create-stack.sh -h`

.. All parameters are optional.

.. If running locally, you can still specify a bucket name with `-b`. Your esults will be uploaded there for ease of sharing. `-p` is recommended for that purpose.

.. If planning to run multiple remote simulations, only use `-s` on the last run, so that you reuse the same stack instead of recreating it over and over again.

    $ ./create-stack.sh -b my-bucket-name -p -s -v

## Customisation

* Currently, the template only works in eu-west-1. If you want to use a different region, you'll have to change the AMI to an Amazon Linux AMI that's valid in the new region.

* By default, the script merely sends GET requests to a target url. But it can provide much more complex use cases if you replace `LoadSimulation.scala` with your own https://gatling.io/documentation/[Gatling simulation script]. (You will eventually be able to pass arbitrary parameters to the simulation, but that is currently WIP.)
